<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body th:replace="fragments/_layout :: layout(~{this :: pageContent}, 'list')">

<div th:fragment="pageContent">
    <section class="banner">Acciones Reserve/Recover disponibles cuando la API PATCH est√© lista</section>

    <div class="controls">
        <form method="get" th:action="@{/ui/ghostnets}">
            <label for="status">Filtrar por estado:</label>
            <select name="status" id="status" onchange="this.form.submit()">
                <option th:value="" th:selected="${selectedStatus == ''}">Todos</option>
                <option th:value="REPORTED" th:selected="${selectedStatus == 'REPORTED'}">REPORTED</option>
                <option th:value="RECOVERY_PENDING" th:selected="${selectedStatus == 'RECOVERY_PENDING'}">RECOVERY_PENDING</option>
                <option th:value="RECOVERED" th:selected="${selectedStatus == 'RECOVERED'}">RECOVERED</option>
                <option th:value="MISSING" th:selected="${selectedStatus == 'MISSING'}">MISSING</option>
            </select>
        </form>

        <a class="btn btn-primary" th:href="@{/ui/ghostnets/new}">Reportar net</a>
    </div>

    <table class="table">
        <thead>
        <tr>
            <th>ID</th>
            <th>Location</th>
            <th>Size</th>
            <th>Status</th>
            <th>CreatedAt</th>
            <th>RecoveringPerson</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:if="${ghostNets == null or #lists.isEmpty(ghostNets)}">
            <td colspan="7">
                <div class="empty-state">
                    <div class="icon">ü™ù</div>
                    <p>No hay ghost nets reportadas todav√≠a.</p>
                    <a class="btn btn-primary" th:href="@{/ui/ghostnets/new}">Reportar net</a>
                </div>
            </td>
        </tr>
        <tr th:each="g : ${ghostNets}">
            <td th:text="${g.id}">1</td>
            <td th:text="${g.location}">Location</td>
            <td th:text="${g.size}">0.0</td>
            <td><span th:text="${g.status}" th:class="'badge ' + ${g.status}">STATUS</span></td>
            <td th:text="${#temporals.format(g.createdAt, 'yyyy-MM-dd HH:mm')}">--</td>
            <td th:text="${g.recoveringPerson != null ? g.recoveringPerson.name : ''}"></td>
            <td>
                <a th:href="@{|/ui/ghostnets/${g.id}/reserve|}"
                   class="btn btn-ghost"
                   th:attr="title=${'Reservar ghost net ' + g.id}, aria-label=${'Reservar ghost net ' + g.id}">Reserve</a>
                <a th:href="@{|/ui/ghostnets/${g.id}/recover|}"
                   class="btn btn-ghost"
                   th:attr="title=${'Marcar recuperado net ' + g.id}, aria-label=${'Marcar recuperado net ' + g.id}">Recover</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>

</body>
</html>
